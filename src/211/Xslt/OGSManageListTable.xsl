<?xml version="1.0"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">	<xsl:output method="html"/>	<xsl:template match="/">		<xsl:apply-templates select="//GenericShoppingList"/>	</xsl:template>	<xsl:template name="OGSManageList" match="GenericShoppingList">		<xsl:variable name="ShowTotal" select="//GenericConsumer/ConsumerSettings/Setting[Name='OGSShowCartTotalOnShoppingList']/Value"/>		<xsl:choose>			<xsl:when test="Categories/Category">				<xsl:for-each select="Categories/Category">					<xsl:sort select="CategoryName" data-type="text"/>					<xsl:variable name="CategoryID" select="CategoryID"/>					<div class="category">						<h3>							<xsl:value-of select="CategoryName"/>						</h3>						<table>							<thead>								<tr>									<th class="ItemImage" scope="col">Item Image</th>									<th class="Item" scope="col">Item</th>									<th class="PriceSavings" scope="col">Price Per Item</th>									<th class="ItemTotal" scope="col">Item Total</th>									<th class="CouponImage" scope="col">Coupon Image</th>									<th class="Delete" scope="col">Delete</th>									<th class="Update" scope="col">Update Weight or Quantity</th>								</tr>							</thead>							<tbody>								<xsl:for-each select="//GenericShoppingList/VisibleItems/GenericShoppingListItem[CategoryID = $CategoryID]">									<xsl:sort select="Description" data-type="text"/>									<xsl:call-template name="OGSShoppingListItemManageRow"/>								</xsl:for-each>							</tbody>						</table>					</div>				</xsl:for-each>			</xsl:when>			<xsl:otherwise>				<xsl:call-template name="NoItems"/>			</xsl:otherwise>		</xsl:choose>		<xsl:if test="count(//GenericShoppingList/VisibleItems/GenericShoppingListItem) &gt; 0">			<xsl:if test="$ShowTotal = 'true'">				<xsl:if test="number(SubTotal) &gt; 0">					<table id="ManageListTotal">						<tr>							<td>Subtotal:</td>							<td>								<xsl:value-of select="format-number(SubTotal, '$###,###.00')"/>							</td>						</tr>					</table>				</xsl:if>				<div id="ShoppingListCheckoutButtonBottom">					<a class="button continueshopping">						<xsl:attribute name="href">##root##/Shop/Product.aspx</xsl:attribute>						<span>Continue Shopping</span>					</a>					<a class="button checkout">						<xsl:attribute name="href">##root##/index.aspx?linkid=42</xsl:attribute>						<span>Checkout</span>					</a>				</div>			</xsl:if>		</xsl:if>	</xsl:template>	<xsl:template name="OGSShoppingListItemManageRow" match="GenericShoppingListItem">		<xsl:param name="ItemID" select="ItemID"/>		<xsl:param name="id" select="concat('ItemRow:', ShoppingListItemID)"/>		<xsl:param name="QuantitySelectID" select="concat($id, ':txtQuantity')"/>		<xsl:param name="Weight" select="Weight"/>		<xsl:variable name="TextBoxID" select="concat('TextBox', $ItemID)"/>		<xsl:variable name="CommentText">			<xsl:choose>				<xsl:when test="string-length(Comment) &gt; 0">					<xsl:value-of select="Comment"/>				</xsl:when>				<xsl:when test="ItemTypeID = 3">					<xsl:value-of select="//ConsumerComments/ProductComments/ConsumerProductComment[ProductID = $ItemID]/Comment"/>				</xsl:when>			</xsl:choose>		</xsl:variable>		<xsl:variable name="ProductID">			<xsl:if test="ItemTypeID = '3'">				<xsl:value-of select="ItemID"/>			</xsl:if>		</xsl:variable>		<tr>			<xsl:attribute name="id">				<xsl:value-of select="$id"/>			</xsl:attribute>			<td>				<xsl:attribute name="class">ItemImage</xsl:attribute>				<xsl:if test="string-length(ImageUrl) &gt; 0">					<xsl:attribute name="onmouseover">						<xsl:choose>							<xsl:when test="ItemTypeID = 3">								<xsl:value-of select="concat('doTipFromImage(this, &quot;', ImageUrl, '&quot;, &quot;Click for more information&quot;);')"/>							</xsl:when>							<xsl:otherwise>								<xsl:value-of select="concat('doTipFromImage(this, &quot;', ImageUrl, '&quot;, &quot;', Description, '&quot;);')"/>							</xsl:otherwise>						</xsl:choose>					</xsl:attribute>				</xsl:if>				<xsl:if test="string-length(SmallImageUrl) &gt; 0">					<xsl:choose>						<xsl:when test="ItemTypeID = 3">							<a>								<xsl:attribute name="href">javascript:RunProductDescription(<xsl:value-of select="ItemID"/>);</xsl:attribute>								<img>									<xsl:attribute name="src">										<xsl:value-of select="SmallImageUrl"/>									</xsl:attribute>								</img>							</a>						</xsl:when>						<xsl:otherwise>							<img>								<xsl:attribute name="src">									<xsl:value-of select="SmallImageUrl"/>								</xsl:attribute>							</img>						</xsl:otherwise>					</xsl:choose>				</xsl:if>			</td>			<td class="Item">				<xsl:value-of select="Description"/>				<xsl:if test="//GenericConsumer/IsLoggedIn = 'true'">					<br/>					<strong class="comment">Comments:</strong>					<input>						<xsl:attribute name="class">comment</xsl:attribute>						<xsl:attribute name="id">							<xsl:value-of select="$ItemID"/>						</xsl:attribute>						<xsl:attribute name="title">comment</xsl:attribute>						<xsl:attribute name="onkeypress">var key = event.keyCode ? event.keyCode : event.which; if (key == 13){ SetListComment('<xsl:value-of select="$id"/>');} return key!=13;</xsl:attribute>						<xsl:attribute name="onblur">javascript:SetListComment('<xsl:value-of select="$id"/>')</xsl:attribute>						<xsl:if test="string-length($CommentText) &gt; 0">							<xsl:attribute name="value">								<xsl:value-of select="$CommentText"/>							</xsl:attribute>						</xsl:if>					</input>					<input type="hidden" title="ItemID">						<xsl:attribute name="value">							<xsl:value-of select="ItemID"/>						</xsl:attribute>					</input>					<input type="hidden" title="ItemTypeID">						<xsl:attribute name="value">							<xsl:value-of select="ItemTypeID"/>						</xsl:attribute>					</input>					<xsl:if test="number($ProductID)">						<input type="hidden" title="ProductID">							<xsl:attribute name="value">								<xsl:value-of select="$ProductID"/>							</xsl:attribute>						</input>					</xsl:if>				</xsl:if>			</td>			<td class="PriceSavings">				<xsl:choose>					<xsl:when test="number(Price) &gt; 0">						<xsl:if test="number(PriceMultiple) &gt; 1">							<xsl:value-of select="concat(PriceMultiple, '/ ')"/>						</xsl:if>						<xsl:value-of select="concat('$', format-number(Price, '0.00'))"/>					</xsl:when>					<xsl:otherwise>						<xsl:value-of select="PriceString"/>					</xsl:otherwise>				</xsl:choose>			</td>			<td class="ItemTotal">				<xsl:if test="Price &gt; 0">					<xsl:variable name="WeightMultiplier">						<xsl:choose>							<xsl:when test="number(Weight)">								<xsl:value-of select="Weight"/>							</xsl:when>							<xsl:otherwise>								<xsl:value-of select="1"/>							</xsl:otherwise>						</xsl:choose>					</xsl:variable>					<xsl:variable name="ItemTotal">						<xsl:choose>							<xsl:when test="number(PriceMultiple) &gt; 1">								<xsl:value-of select="$WeightMultiplier * Quantity * (Price div PriceMultiple)"/>							</xsl:when>							<xsl:otherwise>								<xsl:value-of select="$WeightMultiplier * Quantity * Price"/>							</xsl:otherwise>						</xsl:choose>					</xsl:variable>					<xsl:value-of select="format-number($ItemTotal,'$0.00')"/>				</xsl:if>			</td>			<td class="CouponImage">				<xsl:if test="number(ManufacturerCouponID) &gt; 0 or ItemTypeID = '2'">					<img alt="Manufacturer Coupon" src="/Assets/Common/Images/manufacturercouponicon.gif"/>				</xsl:if>			</td>			<td class="Delete">				<a title="Remove Item">					<xsl:attribute name="href">						<xsl:value-of select="concat('javascript:ManageRemoveFromShoppingList(', ShoppingListItemID, ', ', ItemTypeID, ');')"/>					</xsl:attribute>					<img src="/Assets/Common/Images/delete_icon.gif" alt="Remove"/>				</a>			</td>			<td class="AddButton">				<div class="ProductAddToListControl">					<div>						<input type="text" title="quantity">							<xsl:attribute name="id">								<xsl:value-of select="$QuantitySelectID"/>							</xsl:attribute>							<xsl:attribute name="value">								<xsl:value-of select="Quantity"/>							</xsl:attribute>						</input>						<div id="ProductPlusMinusButtons">							<a class="ProductAddToListPlus">								<xsl:attribute name="href">javascript:changeQuantity('<xsl:value-of select="$QuantitySelectID"/>', 1, 99);</xsl:attribute>							</a>							<a class="ProductAddToListMinus">								<xsl:attribute name="href">javascript:changeQuantity('<xsl:value-of select="$QuantitySelectID"/>', -1, 99);</xsl:attribute>							</a>						</div>					</div>					<xsl:if test="VariableWeight/GenericFraction">						<select title="weight">							<xsl:for-each select="VariableWeight/GenericFraction">								<option>									<xsl:attribute name="value">										<xsl:value-of select="format-number(StoredValue, '0.##')"/>									</xsl:attribute>									<xsl:if test="number(StoredValue) = number($Weight) or number(StoredValue) &gt; number($Weight)">										<xsl:if test="StoredValue - $Weight &lt; 0.25">											<xsl:attribute name="selected"/>										</xsl:if>									</xsl:if>									<xsl:value-of select="DisplayValue"/>								</option>							</xsl:for-each>						</select>						<span class="labelText">						<xsl:choose>							<xsl:when test="string-length(PriceUnit) &gt; 0">																<xsl:value-of select="PriceUnit"/>							</xsl:when>							<xsl:otherwise>								<xsl:text>lb.</xsl:text>							</xsl:otherwise>						</xsl:choose>						</span>					</xsl:if>				</div>				<div>					<a class="button add" title="Update Item">						<xsl:attribute name="href">							<xsl:value-of select="concat('javascript:ManageUpdateRow(', ShoppingListItemID, ', &quot;', $id, '&quot;);')"/>						</xsl:attribute>						<span>Update</span>					</a>				</div>			</td>		</tr>	</xsl:template>	<xsl:template name="NoItems" match="node()">		<div class="category">			<h2>Create a Shopping List:</h2>			<ul>				<li>					<a><xsl:attribute name="href">##root##/Shop/MyPantry.aspx</xsl:attribute>Things I Buy</a>				</li>				<li>					<a><xsl:attribute name="href">##root##/Shop/Product.aspx</xsl:attribute>Browse the Aisles</a>				</li>			</ul>		</div>	</xsl:template></xsl:stylesheet><!-- Stylesheet edited using Stylus Studio - (c) 2004-2009. Progress Software Corporation. All rights reserved. -->